"use strict";function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Autotrack=function(){function n(e){var i,a,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,n),this.trackingId=e,this.defaultOptions={debug:!1,fileTracker:{fileSelector:'a[href$=".pdf"], a[href$=".zip"]',getFileTitle:function(e){return e.textContent}},bannerTracker:{eventAction:"Click",getImageLabel:function(e){return e.getAttribute("alt")}}},this.options=_extends(this.defaultOptions,t),this.listenerIds=[],this.eventHandler=(i=1,a={},{addListener:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return e.addEventListener(t,n,r),a[i]={element:e,event:t,handler:n,capture:r},i++},removeListener:function(e){if(e in a){var t=a[e];t.element.removeEventListener(t.event,t.handler,t.capture),delete a[e]}}})}return _createClass(n,[{key:"_valueIsFunction",value:function(e,t){if("function"!=typeof e)throw t}},{key:"_valueIsString",value:function(e,t){if("string"!=typeof e||""===e)throw t}},{key:"_valueIsInteger",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Number.isInteger(e))throw t;if(n&&e<n)throw t}},{key:"_sendPageView",value:function(e,t){try{this._valueIsString(e,'string "pageTitle" is required.'),this._valueIsString(t,'string "pagePath" is required.')}catch(e){return void console.warn(e)}gtag("config",this.trackingId,{page_title:e,page_path:t})}},{key:"_sendEvent",value:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;try{this._valueIsString(e,'string "eventAction" is required.'),this._valueIsString(t,'string "eventCategory" is required.'),this._valueIsString(n,'string "eventLabel" is required.'),r&&this._valueIsInteger(r,'number "eventValue" must be an integer greater than or equal to 1',0)}catch(e){return void console.warn(e)}gtag("event",e,{event_category:t,event_label:n,value:r})}},{key:"fileTracker",value:function(){var i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=_extends(this.defaultOptions.fileTracker,e),n=document.querySelectorAll(t.fileSelector),a=t.getFileTitle,l=null;[].forEach.call(n,function(r){l=i.eventHandler.addListener(r,"click",function(e){var t=a(r),n=r.getAttribute("href");i.options.debug&&(e.preventDefault(),console.log("pageTitle:",t)),i._sendPageView(t,n)}),i.listenerIds.push(l)})}},{key:"bannerTracker",value:function(){var i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=_extends(this.defaultOptions.bannerTracker,e),n=document.querySelectorAll(t.bannerSelector),a=t.eventAction,l=t.eventCategory,o=t.getImageLabel,s=null;[].forEach.call(n,function(r){s=i.eventHandler.addListener(r,"click",function(e){var t=r.getElementsByTagName("img"),n=o(t[0]);i.options.debug&&(e.preventDefault(),console.log("eventAction:",a),console.log("eventCategory:",l),console.log("eventLabel:",n)),i._sendEvent(a,l,n)}),i.listenerIds.push(s)})}},{key:"removeAllTracker",value:function(){var t=this;this.listenerIds.forEach(function(e){t.eventHandler.removeListener(e)})}}]),n}();